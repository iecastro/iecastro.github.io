"0","vars <- c(""B17001_002"", ""B17001_001"", ""B06009_002"" , ""B06009_001"","
"0","          ""B09008_011"", ""B09008_001"",""B08124_002"", ""B08124_001"", ""B25014_005"", "
"0","          ""B25014_006"",  ""B25014_007"",""B25014_011"", ""B25014_012"", ""B25014_013"",  "
"0","          ""B25014_001"", ""B19058_002"", ""B19058_001"",""C23002C_021"", ""C23002D_008"", "
"0","          ""C23002C_017"", ""C23002D_003"",""B19001_002"", ""B19001_003"", ""B19001_004"", "
"0","          ""B19001_005"", ""B19001_006"", ""B19001_001"")"
"0","acs_us <- get_acs(geography = ""county"", variables = vars, year=2013, "
"0","                  output = ""wide"") %>%"
"0","  mutate(pct_poverty = B17001_002E/B17001_001E,"
"0","         pct_noHS = B06009_002E / B06009_001E,"
"0","         pct_FHH = B09008_011E / B09008_001E,"
"0","         pct_mgmt = B08124_002E /  B08124_001E, "
"0","         pct_crowd =  (B25014_005E +B25014_006E+ B25014_007E + "
"0","                         B25014_011E + B25014_012E + B25014_013E) / B25014_001E,"
"0","         pct_pubassist = B19058_002E/B19058_001E,"
"0","         pct_unempl = (C23002C_021E + C23002D_008E)  / (C23002C_017E + C23002D_003E),"
"0","         pct_under30K =( B19001_002E+B19001_003E+B19001_004E+B19001_005E +"
"0","                           B19001_006E) / B19001_001E)"
"0","## select transformed variables"
"0","values  <-  acs_us %>% select(pct_poverty,pct_noHS,pct_FHH,pct_mgmt,pct_crowd,"
"0","                              pct_pubassist, pct_unempl,pct_under30K) %>% as.matrix()"
"0","values[is.nan(values)] <- 0"
"0","## PCA"
"0","ND <- principal(values,nfactors = 1)          "
"0","NDI_us <- cbind(acs_us,ND$scores) "
